{"version":3,"file":"js/edit.36a11e86.js","mappings":"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","sources":["webpack://gps-leaflet/./node_modules/vuetify/lib/components/VDialog/VDialog.mjs","webpack://gps-leaflet/./node_modules/vuetify/lib/components/VTextarea/VTextarea.mjs","webpack://gps-leaflet/./src/components/editroute/EditRoutesTable.vue","webpack://gps-leaflet/./src/components/editroute/EditRoutesTable.vue?ea92","webpack://gps-leaflet/./src/views/EditRoute.vue","webpack://gps-leaflet/./src/views/EditRoute.vue?d008","webpack://gps-leaflet/./node_modules/@tmcw/togeojson/dist/togeojson.cjs","webpack://gps-leaflet/./node_modules/vuetify/lib/components/VFileInput/VFileInput.mjs","webpack://gps-leaflet/./node_modules/vuetify/lib/components/VForm/VForm.mjs"],"sourcesContent":["import { mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\";\n// Styles\nimport \"./VDialog.css\";\n\n// Components\nimport { VDialogTransition } from \"../transitions/index.mjs\";\nimport { VDefaultsProvider } from \"../VDefaultsProvider/index.mjs\";\nimport { VOverlay } from \"../VOverlay/index.mjs\";\nimport { makeVOverlayProps } from \"../VOverlay/VOverlay.mjs\"; // Composables\nimport { forwardRefs } from \"../../composables/forwardRefs.mjs\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.mjs\";\nimport { useScopeId } from \"../../composables/scopeId.mjs\"; // Utilities\nimport { computed, mergeProps, nextTick, ref, watch } from 'vue';\nimport { focusableChildren, genericComponent, IN_BROWSER, propsFactory, useRender } from \"../../util/index.mjs\"; // Types\nexport const makeVDialogProps = propsFactory({\n  fullscreen: Boolean,\n  retainFocus: {\n    type: Boolean,\n    default: true\n  },\n  scrollable: Boolean,\n  ...makeVOverlayProps({\n    origin: 'center center',\n    scrollStrategy: 'block',\n    transition: {\n      component: VDialogTransition\n    },\n    zIndex: 2400\n  })\n}, 'VDialog');\nexport const VDialog = genericComponent()({\n  name: 'VDialog',\n  props: makeVDialogProps(),\n  emits: {\n    'update:modelValue': value => true\n  },\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const isActive = useProxiedModel(props, 'modelValue');\n    const {\n      scopeId\n    } = useScopeId();\n    const overlay = ref();\n    function onFocusin(e) {\n      const before = e.relatedTarget;\n      const after = e.target;\n      if (before !== after && overlay.value?.contentEl &&\n      // We're the topmost dialog\n      overlay.value?.globalTop &&\n      // It isn't the document or the dialog body\n      ![document, overlay.value.contentEl].includes(after) &&\n      // It isn't inside the dialog body\n      !overlay.value.contentEl.contains(after)) {\n        const focusable = focusableChildren(overlay.value.contentEl);\n        if (!focusable.length) return;\n        const firstElement = focusable[0];\n        const lastElement = focusable[focusable.length - 1];\n        if (before === firstElement) {\n          lastElement.focus();\n        } else {\n          firstElement.focus();\n        }\n      }\n    }\n    if (IN_BROWSER) {\n      watch(() => isActive.value && props.retainFocus, val => {\n        val ? document.addEventListener('focusin', onFocusin) : document.removeEventListener('focusin', onFocusin);\n      }, {\n        immediate: true\n      });\n    }\n    watch(isActive, async val => {\n      await nextTick();\n      if (val) {\n        overlay.value.contentEl?.focus({\n          preventScroll: true\n        });\n      } else {\n        overlay.value.activatorEl?.focus({\n          preventScroll: true\n        });\n      }\n    });\n    const activatorProps = computed(() => mergeProps({\n      'aria-haspopup': 'dialog',\n      'aria-expanded': String(isActive.value)\n    }, props.activatorProps));\n    useRender(() => {\n      const [overlayProps] = VOverlay.filterProps(props);\n      return _createVNode(VOverlay, _mergeProps({\n        \"ref\": overlay,\n        \"class\": ['v-dialog', {\n          'v-dialog--fullscreen': props.fullscreen,\n          'v-dialog--scrollable': props.scrollable\n        }, props.class],\n        \"style\": props.style\n      }, overlayProps, {\n        \"modelValue\": isActive.value,\n        \"onUpdate:modelValue\": $event => isActive.value = $event,\n        \"aria-modal\": \"true\",\n        \"activatorProps\": activatorProps.value,\n        \"role\": \"dialog\"\n      }, scopeId), {\n        activator: slots.activator,\n        default: function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n          return _createVNode(VDefaultsProvider, {\n            \"root\": \"VDialog\"\n          }, {\n            default: () => [slots.default?.(...args)]\n          });\n        }\n      });\n    });\n    return forwardRefs({}, overlay);\n  }\n});\n//# sourceMappingURL=VDialog.mjs.map","import { vModelText as _vModelText, withDirectives as _withDirectives, mergeProps as _mergeProps, resolveDirective as _resolveDirective, createVNode as _createVNode, Fragment as _Fragment } from \"vue\";\n// Styles\nimport \"./VTextarea.css\";\nimport \"../VTextField/VTextField.css\";\n\n// Components\nimport { VCounter } from \"../VCounter/VCounter.mjs\";\nimport { VField } from \"../VField/index.mjs\";\nimport { filterFieldProps, makeVFieldProps } from \"../VField/VField.mjs\";\nimport { makeVInputProps, VInput } from \"../VInput/VInput.mjs\"; // Composables\nimport { useFocus } from \"../../composables/focus.mjs\";\nimport { forwardRefs } from \"../../composables/forwardRefs.mjs\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.mjs\"; // Directives\nimport Intersect from \"../../directives/intersect/index.mjs\"; // Utilities\nimport { computed, nextTick, onBeforeUnmount, onMounted, ref, shallowRef, watch, watchEffect } from 'vue';\nimport { callEvent, clamp, convertToUnit, filterInputAttrs, genericComponent, propsFactory, useRender } from \"../../util/index.mjs\"; // Types\nexport const makeVTextareaProps = propsFactory({\n  autoGrow: Boolean,\n  autofocus: Boolean,\n  counter: [Boolean, Number, String],\n  counterValue: Function,\n  prefix: String,\n  placeholder: String,\n  persistentPlaceholder: Boolean,\n  persistentCounter: Boolean,\n  noResize: Boolean,\n  rows: {\n    type: [Number, String],\n    default: 5,\n    validator: v => !isNaN(parseFloat(v))\n  },\n  maxRows: {\n    type: [Number, String],\n    validator: v => !isNaN(parseFloat(v))\n  },\n  suffix: String,\n  modelModifiers: Object,\n  ...makeVInputProps(),\n  ...makeVFieldProps()\n}, 'VTextarea');\nexport const VTextarea = genericComponent()({\n  name: 'VTextarea',\n  directives: {\n    Intersect\n  },\n  inheritAttrs: false,\n  props: makeVTextareaProps(),\n  emits: {\n    'click:control': e => true,\n    'mousedown:control': e => true,\n    'update:focused': focused => true,\n    'update:modelValue': val => true\n  },\n  setup(props, _ref) {\n    let {\n      attrs,\n      emit,\n      slots\n    } = _ref;\n    const model = useProxiedModel(props, 'modelValue');\n    const {\n      isFocused,\n      focus,\n      blur\n    } = useFocus(props);\n    const counterValue = computed(() => {\n      return typeof props.counterValue === 'function' ? props.counterValue(model.value) : (model.value || '').toString().length;\n    });\n    const max = computed(() => {\n      if (attrs.maxlength) return attrs.maxlength;\n      if (!props.counter || typeof props.counter !== 'number' && typeof props.counter !== 'string') return undefined;\n      return props.counter;\n    });\n    function onIntersect(isIntersecting, entries) {\n      if (!props.autofocus || !isIntersecting) return;\n      entries[0].target?.focus?.();\n    }\n    const vInputRef = ref();\n    const vFieldRef = ref();\n    const controlHeight = shallowRef('');\n    const textareaRef = ref();\n    const isActive = computed(() => props.persistentPlaceholder || isFocused.value || props.active);\n    function onFocus() {\n      if (textareaRef.value !== document.activeElement) {\n        textareaRef.value?.focus();\n      }\n      if (!isFocused.value) focus();\n    }\n    function onControlClick(e) {\n      onFocus();\n      emit('click:control', e);\n    }\n    function onControlMousedown(e) {\n      emit('mousedown:control', e);\n    }\n    function onClear(e) {\n      e.stopPropagation();\n      onFocus();\n      nextTick(() => {\n        model.value = '';\n        callEvent(props['onClick:clear'], e);\n      });\n    }\n    function onInput(e) {\n      const el = e.target;\n      model.value = el.value;\n      if (props.modelModifiers?.trim) {\n        const caretPosition = [el.selectionStart, el.selectionEnd];\n        nextTick(() => {\n          el.selectionStart = caretPosition[0];\n          el.selectionEnd = caretPosition[1];\n        });\n      }\n    }\n    const sizerRef = ref();\n    const rows = ref(+props.rows);\n    const isPlainOrUnderlined = computed(() => ['plain', 'underlined'].includes(props.variant));\n    watchEffect(() => {\n      if (!props.autoGrow) rows.value = +props.rows;\n    });\n    function calculateInputHeight() {\n      if (!props.autoGrow) return;\n      nextTick(() => {\n        if (!sizerRef.value || !vFieldRef.value) return;\n        const style = getComputedStyle(sizerRef.value);\n        const fieldStyle = getComputedStyle(vFieldRef.value.$el);\n        const padding = parseFloat(style.getPropertyValue('--v-field-padding-top')) + parseFloat(style.getPropertyValue('--v-input-padding-top')) + parseFloat(style.getPropertyValue('--v-field-padding-bottom'));\n        const height = sizerRef.value.scrollHeight;\n        const lineHeight = parseFloat(style.lineHeight);\n        const minHeight = Math.max(parseFloat(props.rows) * lineHeight + padding, parseFloat(fieldStyle.getPropertyValue('--v-input-control-height')));\n        const maxHeight = parseFloat(props.maxRows) * lineHeight + padding || Infinity;\n        const newHeight = clamp(height ?? 0, minHeight, maxHeight);\n        rows.value = Math.floor((newHeight - padding) / lineHeight);\n        controlHeight.value = convertToUnit(newHeight);\n      });\n    }\n    onMounted(calculateInputHeight);\n    watch(model, calculateInputHeight);\n    watch(() => props.rows, calculateInputHeight);\n    watch(() => props.maxRows, calculateInputHeight);\n    watch(() => props.density, calculateInputHeight);\n    let observer;\n    watch(sizerRef, val => {\n      if (val) {\n        observer = new ResizeObserver(calculateInputHeight);\n        observer.observe(sizerRef.value);\n      } else {\n        observer?.disconnect();\n      }\n    });\n    onBeforeUnmount(() => {\n      observer?.disconnect();\n    });\n    useRender(() => {\n      const hasCounter = !!(slots.counter || props.counter || props.counterValue);\n      const hasDetails = !!(hasCounter || slots.details);\n      const [rootAttrs, inputAttrs] = filterInputAttrs(attrs);\n      const [{\n        modelValue: _,\n        ...inputProps\n      }] = VInput.filterProps(props);\n      const [fieldProps] = filterFieldProps(props);\n      return _createVNode(VInput, _mergeProps({\n        \"ref\": vInputRef,\n        \"modelValue\": model.value,\n        \"onUpdate:modelValue\": $event => model.value = $event,\n        \"class\": ['v-textarea v-text-field', {\n          'v-textarea--prefixed': props.prefix,\n          'v-textarea--suffixed': props.suffix,\n          'v-text-field--prefixed': props.prefix,\n          'v-text-field--suffixed': props.suffix,\n          'v-textarea--auto-grow': props.autoGrow,\n          'v-textarea--no-resize': props.noResize || props.autoGrow,\n          'v-text-field--plain-underlined': isPlainOrUnderlined.value\n        }, props.class],\n        \"style\": props.style\n      }, rootAttrs, inputProps, {\n        \"centerAffix\": rows.value === 1 && !isPlainOrUnderlined.value,\n        \"focused\": isFocused.value\n      }), {\n        ...slots,\n        default: _ref2 => {\n          let {\n            isDisabled,\n            isDirty,\n            isReadonly,\n            isValid\n          } = _ref2;\n          return _createVNode(VField, _mergeProps({\n            \"ref\": vFieldRef,\n            \"style\": {\n              '--v-textarea-control-height': controlHeight.value\n            },\n            \"onClick\": onControlClick,\n            \"onMousedown\": onControlMousedown,\n            \"onClick:clear\": onClear,\n            \"onClick:prependInner\": props['onClick:prependInner'],\n            \"onClick:appendInner\": props['onClick:appendInner']\n          }, fieldProps, {\n            \"active\": isActive.value || isDirty.value,\n            \"centerAffix\": rows.value === 1 && !isPlainOrUnderlined.value,\n            \"dirty\": isDirty.value || props.dirty,\n            \"disabled\": isDisabled.value,\n            \"focused\": isFocused.value,\n            \"error\": isValid.value === false\n          }), {\n            ...slots,\n            default: _ref3 => {\n              let {\n                props: {\n                  class: fieldClass,\n                  ...slotProps\n                }\n              } = _ref3;\n              return _createVNode(_Fragment, null, [props.prefix && _createVNode(\"span\", {\n                \"class\": \"v-text-field__prefix\"\n              }, [props.prefix]), _withDirectives(_createVNode(\"textarea\", _mergeProps({\n                \"ref\": textareaRef,\n                \"class\": fieldClass,\n                \"value\": model.value,\n                \"onInput\": onInput,\n                \"autofocus\": props.autofocus,\n                \"readonly\": isReadonly.value,\n                \"disabled\": isDisabled.value,\n                \"placeholder\": props.placeholder,\n                \"rows\": props.rows,\n                \"name\": props.name,\n                \"onFocus\": onFocus,\n                \"onBlur\": blur\n              }, slotProps, inputAttrs), null), [[_resolveDirective(\"intersect\"), {\n                handler: onIntersect\n              }, null, {\n                once: true\n              }]]), props.autoGrow && _withDirectives(_createVNode(\"textarea\", {\n                \"class\": [fieldClass, 'v-textarea__sizer'],\n                \"id\": `${slotProps.id}-sizer`,\n                \"onUpdate:modelValue\": $event => model.value = $event,\n                \"ref\": sizerRef,\n                \"readonly\": true,\n                \"aria-hidden\": \"true\"\n              }, null), [[_vModelText, model.value]]), props.suffix && _createVNode(\"span\", {\n                \"class\": \"v-text-field__suffix\"\n              }, [props.suffix])]);\n            }\n          });\n        },\n        details: hasDetails ? slotProps => _createVNode(_Fragment, null, [slots.details?.(slotProps), hasCounter && _createVNode(_Fragment, null, [_createVNode(\"span\", null, null), _createVNode(VCounter, {\n          \"active\": props.persistentCounter || isFocused.value,\n          \"value\": counterValue.value,\n          \"max\": max.value\n        }, slots.counter)])]) : undefined\n      });\n    });\n    return forwardRefs({}, vInputRef, vFieldRef, textareaRef);\n  }\n});\n//# sourceMappingURL=VTextarea.mjs.map","<template>\r\n  <v-card>\r\n    <v-card-title>\r\n      <!-- title? -->\r\n      <v-spacer></v-spacer>\r\n      <v-text-field\r\n        v-model=\"search\"\r\n        append-icon=\"mdi-magnify\"\r\n        label=\"Search\"\r\n        single-line\r\n        hide-details\r\n      ></v-text-field>\r\n    </v-card-title>\r\n    <br />\r\n    <v-row justify=\"center\">\r\n      <!-- Add Route Dialog -->\r\n      <v-dialog>\r\n        <template v-slot:activator=\"{ props }\">\r\n          <v-btn flat v-bind=\"props\"\r\n            ><v-icon icon=\"mdi-plus\" />Add a new route</v-btn\r\n          >\r\n        </template>\r\n\r\n        <template v-slot:default=\"{ isActive }\">\r\n          <v-card style=\"color: blue\">\r\n            <v-container>\r\n              <v-row justify=\"center\">\r\n                <div class=\"text-h4\">Add a new Route</div>\r\n              </v-row>\r\n            </v-container>\r\n            <v-form\r\n              class=\"routeForm\"\r\n              validate-on=\"submit lazy\"\r\n              @submit.prevent=\"submit\"\r\n              ref=\"form\"\r\n            >\r\n              <v-row justify=\"center\">\r\n                <v-col cols=\"9\">\r\n                  <v-text-field\r\n                    label=\"Route Name\"\r\n                    prepend-icon=\"mdi-bike\"\r\n                    class=\"routeName\"\r\n                    type=\"text\"\r\n                    variant=\"outlined\"\r\n                    name=\"routeName\"\r\n                    v-model=\"routeName\"\r\n                    :rules=\"inputRules\"\r\n                    required\r\n                  ></v-text-field>\r\n                </v-col>\r\n              </v-row>\r\n              <v-row justify=\"center\">\r\n                <v-col cols=\"9\">\r\n                  <v-select\r\n                    label=\"Select Terrain:\"\r\n                    prepend-icon=\"mdi-road\"\r\n                    v-model=\"terrain\"\r\n                    :items=\"['Paved', 'Gravel', 'Dirt']\"\r\n                    :rules=\"inputRules\"\r\n                  >\r\n                  </v-select>\r\n                </v-col>\r\n              </v-row>\r\n              <v-row justify=\"center\">\r\n                <v-col cols=\"9\">\r\n                  <v-select\r\n                    label=\"Select Difficulty: \"\r\n                    prepend-icon=\"mdi-alert\"\r\n                    v-model=\"difficulty\"\r\n                    :items=\"['Beginner', 'Intermediate', 'Expert']\"\r\n                    :rules=\"inputRules\"\r\n                  >\r\n                  </v-select>\r\n                </v-col>\r\n              </v-row>\r\n              <v-row justify=\"center\">\r\n                <v-col cols=\"9\">\r\n                  <v-textarea\r\n                    label=\"Route Description\"\r\n                    prepend-icon=\"mdi-pencil\"\r\n                    class=\"routeDesc\"\r\n                    type=\"text\"\r\n                    variant=\"outlined\"\r\n                    name=\"routeDesc\"\r\n                    v-model=\"routeDesc\"\r\n                    :rules=\"inputRules\"\r\n                    required\r\n                  ></v-textarea>\r\n                </v-col>\r\n              </v-row>\r\n              <v-row justify=\"center\">\r\n                <v-col cols=\"9\">\r\n                  <v-file-input\r\n                    label=\"Upload .gpx File\"\r\n                    variant=\"outlined\"\r\n                    accept=\".gpx\"\r\n                    type=\"file\"\r\n                    ref=\"file\"\r\n                    :rules=\"inputRules\"\r\n                    prepend-icon=\"mdi-map\"\r\n                    required\r\n                  ></v-file-input>\r\n                </v-col>\r\n              </v-row>\r\n              <v-row justify=\"center\">\r\n                <v-btn width=\"200%\" type=\"submit\" flat>submit</v-btn>\r\n              </v-row>\r\n              <v-row>\r\n                <v-spacer></v-spacer>\r\n              </v-row>\r\n            </v-form>\r\n          </v-card>\r\n        </template>\r\n      </v-dialog>\r\n      <v-dialog width=\"500\">\r\n        <template v-slot:activator=\"{ props }\"> </template>\r\n\r\n        <template v-slot:default=\"{ isActive }\">\r\n          <v-card title=\"Add Route\"> </v-card>\r\n        </template>\r\n      </v-dialog>\r\n    </v-row>\r\n    <v-data-table\r\n      class=\"routes-table\"\r\n      :headers=\"headers\"\r\n      :items=\"routes\"\r\n      :search=\"search\"\r\n    >\r\n      <template #item.name=\"{ item }\">\r\n        <router-link :to=\"'/route/' + item.id\"\r\n          >\r\n          {{ item.name }}\r\n        </router-link>\r\n      </template>\r\n      <template #item.edit=\"{ item }\">\r\n        <!-- Edit Route Dialog -->\r\n\r\n        <v-dialog>\r\n          <template v-slot:activator=\"{ props }\">\r\n            <v-btn class=\"tableBtn\" v-bind=\"props\" icon=\"mdi-pencil\"> </v-btn>\r\n          </template>\r\n\r\n          <template v-slot:default=\"{ isActive }\">\r\n            <v-card title=\"Edit Route\">\r\n              <v-form\r\n                class=\"routeForm\"\r\n                validate-on=\"submit lazy\"\r\n                @submit.prevent=\"submitEdit\"\r\n                ref=\"editForm\"\r\n              >\r\n                <v-row justify=\"center\">\r\n                  <v-col cols=\"9\">\r\n                    <v-card-text>ID: {{ item.id }}</v-card-text>\r\n                    <v-card-text>Name: {{ item.name }}</v-card-text>\r\n                    <v-text-field\r\n                      prepend-icon=\"mdi-map-marker\"\r\n                      v-model=\"item.name\"\r\n                      clearable\r\n                      hide-details=\"auto\"\r\n                      label=\"Route Name\"\r\n                    ></v-text-field>\r\n\r\n                    <v-select\r\n                      label=\"Terrain\"\r\n                      prepend-icon=\"mdi-road\"\r\n                      v-model=\"item.terrain\"\r\n                      :items=\"['Paved', 'Gravel', 'Dirt']\"\r\n                      :rules=\"inputRules\"\r\n                    >\r\n                    </v-select>\r\n                    <v-select\r\n                      label=\"Select Difficulty: \"\r\n                      prepend-icon=\"mdi-alert\"\r\n                      v-model=\"item.difficulty\"\r\n                      :items=\"['Beginner', 'Intermediate', 'Expert']\"\r\n                      :rules=\"inputRules\"\r\n                    >\r\n                    </v-select>\r\n                    <v-textarea\r\n                      label=\"Route Description\"\r\n                      prepend-icon=\"mdi-pencil\"\r\n                      class=\"routeDesc\"\r\n                      type=\"text\"\r\n                      variant=\"outlined\"\r\n                      name=\"routeDesc\"\r\n                      v-model=\"item.desc\"\r\n                      :rules=\"inputRules\"\r\n                      required\r\n                    ></v-textarea>\r\n                    <v-row justify=\"center\">\r\n                      <div class=\"text-h5\">Upload a new GPX file</div>\r\n                    </v-row>\r\n\r\n                    <v-row>\r\n                      <v-file-input\r\n                        label=\"Upload .gpx File\"\r\n                        variant=\"outlined\"\r\n                        accept=\".gpx\"\r\n                        type=\"file\"\r\n                        ref=\"file\"\r\n                        :rules=\"inputRules\"\r\n                        prepend-icon=\"mdi-map\"\r\n                        required\r\n                      ></v-file-input>\r\n                    </v-row>\r\n                    <v-row justify=\"center\">\r\n                      <v-btn width=\"200%\" type=\"submit\" flat>submit</v-btn>\r\n                    </v-row>\r\n                  </v-col>\r\n                </v-row>\r\n              </v-form>\r\n            </v-card>\r\n          </template>\r\n        </v-dialog>\r\n      </template>\r\n      <template #item.del=\"{ item }\">\r\n        <div class=\"tableBtn\">\r\n          <v-btn\r\n            icon=\"mdi-trash-can\"\r\n            @click=\"del(item.id)\"\r\n          /><!-- add download functionality -->\r\n        </div>\r\n      </template>\r\n    </v-data-table>\r\n  </v-card>\r\n</template>\r\n<script setup>\r\n// stylesheet\r\nimport \"@/css/routes-table.css\";\r\nimport { useRouteStore } from \"@/store/index.js\";\r\nimport { storeToRefs } from \"pinia\";\r\nimport { ref, reactive, computed } from \"vue\";\r\n\r\nimport {\r\n  VDataTable,\r\n  VDataTableServer,\r\n  VDataTableVirtual,\r\n} from \"vuetify/labs/VDataTable\";\r\nlet search = ref(\"\"); //unused\r\nlet headers = reactive([\r\n  {\r\n    align: \"start\",\r\n    key: \"name\",\r\n    title: \"Routes\",\r\n  },\r\n  { key: \"edit\", title: \"Edit\", sortable: false },\r\n  { key: \"del\", title: \"Delete\", sortable: false },\r\n]);\r\n\r\nconst routeStore = useRouteStore();\r\nconst { getRoutes } = storeToRefs(routeStore);\r\nlet routes = computed(() => routeStore.getRoutes);\r\n\r\nlet del = async (id) => {\r\n  routeStore.deleteRoute(id);\r\n};\r\nlet add = async () => {};\r\nlet edit = async (id) => {};\r\nlet routeName = ref(\"\");\r\nlet routeLength = ref();\r\nlet terrain = ref(\"\");\r\nlet difficulty = ref(\"\");\r\nlet routeDesc = ref(\"\");\r\nlet file = ref();\r\nlet gpx = ref();\r\nlet newRoute = ref();\r\nlet elevation = ref();\r\n\r\nlet erouteName = ref(\"\");\r\nlet erouteLength = ref();\r\nlet eterrain = ref(\"\");\r\nlet edifficulty = ref(\"\");\r\nlet erouteDesc = ref(\"\");\r\nlet efile = ref();\r\nlet egpx = ref();\r\nlet enewRoute = ref();\r\nlet eelevation = ref();\r\n\r\nlet editForm = ref();\r\n\r\n//methods\r\nlet submitEdit = async (event) => {\r\n  console.log(editForm.value);\r\n};\r\n\r\nlet submit = async (event) => {\r\n  const check = (await event).valid;\r\n  if (check) {\r\n    try {\r\n      await handleFile();\r\n      //create route and send it to the backend\r\n      let routeToAdd = {\r\n        route: newRoute.value,\r\n        name: routeName.value,\r\n        gpx: gpx.value,\r\n        difficulty: difficulty.value,\r\n        length: routeLength.value,\r\n        terrain: terrain.value,\r\n        desc: routeDesc.value,\r\n        elevation: elevation.value,\r\n      };\r\n\r\n      routeStore.addRoute(routeToAdd);\r\n    } catch (error) {\r\n      console.log(\"error\", error);\r\n    } //\r\n  }\r\n};\r\n\r\nlet handleFile = () => {\r\n  return new Promise((resolve, reject) => {\r\n    try {\r\n      if (file) {\r\n        const reader = new FileReader();\r\n        reader.onload = async () => {\r\n          const tj = require(\"@tmcw/togeojson\"); //gpx to json converter\r\n          const fileContent = file.value.files[0];\r\n          //gpx text -> base64 to be stored in db\r\n          const blob = new Blob([fileContent], { type: \"text/plain\" });\r\n          const text = await blob.text();\r\n          gpx.value = btoa(text);\r\n          //make the text into a gpx file and parse it into a json object\r\n          const gpxFile = new DOMParser().parseFromString(text, \"text/xml\");\r\n          const converted = tj.gpx(gpxFile);\r\n          newRoute.value = converted;\r\n\r\n          const coords = converted.features[0].geometry.coordinates;\r\n          //max locations per request is 512\r\n          let countBy = Math.ceil(coords.length / 512);\r\n          let elevArr = {\r\n            locations: [],\r\n          };\r\n          let count = 0;\r\n          for (let i = 0; i < coords.length; i = i + countBy) {\r\n            elevArr.locations[count] = {\r\n              latitude: coords[i][1],\r\n              longitude: coords[i][0],\r\n            };\r\n            count++;\r\n          }\r\n          console.log(elevArr);\r\n          //get elevation at coord points from backend\r\n          let eresponse = await fetch(\r\n            `https://api.open-elevation.com/api/v1/lookup`,\r\n            {\r\n              method: \"POST\",\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n              },\r\n              body: JSON.stringify(elevArr),\r\n            }\r\n          );\r\n\r\n          eresponse = await eresponse.json();\r\n          console.log(eresponse);\r\n          //elevation gain\r\n          elevArr = eresponse.results;\r\n          let egain = 0;\r\n          let diff = 0;\r\n          for (let i = 1; i < elevArr.length; i++) {\r\n            diff = elevArr[i].elevation - elevArr[i - 1].elevation;\r\n            //only positive elevation changes are added\r\n            if (diff > 0) {\r\n              egain += diff;\r\n            }\r\n          }\r\n          egain = Math.round(egain * 3.28084 * 10) / 10; //meters to feet, rounded to 1 decimal\r\n          elevation.value = egain;\r\n          //route length/distance\r\n          let totalDistance = 0;\r\n          let lat1 = 0;\r\n          let long1 = 0;\r\n          let lat2 = 0;\r\n          let long2 = 0;\r\n          for (let i = 0; i < coords.length - 1; i++) {\r\n            const d2ra = (angle) => (angle * Math.PI) / 180; //degrees to radians\r\n            lat1 = d2ra(coords[i][1]);\r\n            long1 = d2ra(coords[i][0]);\r\n            lat2 = d2ra(coords[i + 1][1]);\r\n            long2 = d2ra(coords[i + 1][0]);\r\n            //use haversine formula to calculate distance between the two points\r\n            const diffLat = lat2 - lat1; //distance between each point\r\n            const diffLong = long2 - long1;\r\n            const a =\r\n              Math.sin(diffLat / 2) ** 2 +\r\n              Math.cos(lat1) * Math.cos(lat2) * Math.sin(diffLong / 2) ** 2;\r\n            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n            const radius = 6371000; //earths radius\r\n            const distance = radius * c;\r\n            totalDistance += distance;\r\n          }\r\n\r\n          routeLength.value =\r\n            Math.round((totalDistance / 1000) * 0.621371 * 10) / 10; //meters to miles, rounded to 1 decimal\r\n          let f = (response) => {\r\n            // request succeeded\r\n            resolve(response);\r\n          };\r\n          f();\r\n        };\r\n        reader.readAsText(file.value.files[0]);\r\n      }\r\n    } catch (e) {\r\n      reject(e);\r\n    }\r\n  });\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.tableBtn {\r\n  scale: 80%;\r\n}\r\n.dialogBtn {\r\n  scale: 80%;\r\n}\r\n</style>\r\n","import script from \"./EditRoutesTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./EditRoutesTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./EditRoutesTable.vue?vue&type=style&index=0&id=165c6f34&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-165c6f34\"]])\n\nexport default __exports__","<template>\r\n  <v-row justify=\"center\">\r\n    <v-col cols=\"6\">\r\n      <EditRoutesTable />\r\n    </v-col>\r\n  </v-row>\r\n\r\n\r\n  <!-- To be removed after edit route table complete -->\r\n  <div class=\"add-route-container\">\r\n    <v-form\r\n      class=\"routeForm\"\r\n      validate-on=\"submit lazy\"\r\n      @submit.prevent=\"submit\"\r\n      ref=\"form\"\r\n    >\r\n      <v-container class=\"input\">\r\n        <v-text-field\r\n          label=\"Route Name\"\r\n          prepend-icon=\"mdi-bike\"\r\n          class=\"routeName\"\r\n          type=\"text\"\r\n          variant=\"outlined\"\r\n          name=\"routeName\"\r\n          v-model=\"routeName\"\r\n          :rules=\"inputRules\"\r\n          required\r\n        ></v-text-field>\r\n        <v-container class=\"filter\">\r\n          <v-select\r\n            label=\"Select Terrain:\"\r\n            prepend-icon=\"mdi-road\"\r\n            v-model=\"terrain\"\r\n            :items=\"['Paved', 'Gravel', 'Dirt']\"\r\n            :rules=\"inputRules\"\r\n          >\r\n          </v-select>\r\n          <v-select\r\n            label=\"Select Difficulty: \"\r\n            prepend-icon=\"mdi-alert\"\r\n            v-model=\"difficulty\"\r\n            :items=\"['Beginner', 'Intermediate', 'Expert']\"\r\n            :rules=\"inputRules\"\r\n          >\r\n          </v-select>\r\n        </v-container>\r\n        <v-textarea\r\n          label=\"Route Description\"\r\n          prepend-icon=\"mdi-pencil\"\r\n          class=\"routeDesc\"\r\n          type=\"text\"\r\n          variant=\"outlined\"\r\n          name=\"routeDesc\"\r\n          v-model=\"routeDesc\"\r\n          :rules=\"inputRules\"\r\n          required\r\n        ></v-textarea>\r\n        <v-textarea\r\n          label=\"Points of Interest\"\r\n          prepend-icon=\"fa:fas fa-search\"\r\n          class=\"routeDesc\"\r\n          type=\"text\"\r\n          variant=\"outlined\"\r\n          name=\"poi\"\r\n          v-model=\"poi\"\r\n          :rules=\"inputRules\"\r\n        ></v-textarea>\r\n        <v-file-input\r\n          label=\"Upload .gpx File\"\r\n          variant=\"outlined\"\r\n          accept=\".gpx\"\r\n          type=\"file\"\r\n          ref=\"file\"\r\n          :rules=\"inputRules\"\r\n          prepend-icon=\"mdi-map\"\r\n          required\r\n        ></v-file-input>\r\n        <v-btn type=\"submit\">submit</v-btn>\r\n      </v-container>\r\n    </v-form>\r\n\r\n    <v-container class=\"routeList\">\r\n      <h2>Routes:</h2>\r\n      <v-container class=\"route\" :key=\"r.name\" v-for=\"r in routes\">\r\n        <p>{{ r.name }} ID: {{ r.id }}</p>\r\n        <v-btn @click=\"deleteBtn(r.id)\">DELETE</v-btn>\r\n      </v-container>\r\n    </v-container>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport EditRoutesTable from \"@/components/editroute/EditRoutesTable.vue\";\r\nimport { useRouteStore } from \"@/store/index.js\";\r\nimport { storeToRefs } from \"pinia\";\r\nimport { ref, reactive, computed } from \"vue\";\r\nconst form = ref(null);\r\nconst file = ref(null); //gpx file\r\nconst routeStore = useRouteStore();\r\nconst { deleteRoute, addRoute, getRoutes } = storeToRefs(routeStore);\r\n//route list\r\nlet routes = computed(() => routeStore.getRoutes);\r\n//data to be sent to backend to create new route\r\nlet newRoute = ref();\r\nlet routeName = ref(\"\");\r\nlet gpx = ref(\"\");\r\nlet difficulty = ref(\"\");\r\nlet routeLength = ref(0);\r\nlet terrain = ref(\"\");\r\nlet routeDesc = ref(\"\");\r\nlet elevation = ref(0);\r\nlet poi = ref(\"\");\r\n\r\n\r\n\r\n\r\n\r\n//input validation\r\nlet inputRules = reactive([\r\n  (v) => v.length > 0 || \"Please add a value to this field\",\r\n]);\r\nlet deleteBtn = (id) => {\r\n  routeStore.deleteRoute(id);\r\n};\r\nlet submit = async (event) => {\r\n  const check = (await event).valid;\r\n  if (check) {\r\n    try {\r\n      await handleFile();\r\n      //create route objects and send it to the backend\r\n      let routeToAdd = {\r\n        route: newRoute.value,\r\n        name: routeName.value,\r\n        gpx: gpx.value,\r\n        difficulty: difficulty.value,\r\n        length: routeLength.value,\r\n        terrain: terrain.value,\r\n        desc: routeDesc.value,\r\n        elevation: elevation.value,\r\n\r\n        poi: poi.value\r\n\r\n      };\r\n\r\n      routeStore.addRoute(routeToAdd);\r\n    } catch (error) {\r\n      console.log(\"error\", error);\r\n    } //\r\n  }\r\n};\r\nlet handleFile = () => {\r\n  return new Promise((resolve, reject) => {\r\n    try {\r\n      if (file) {\r\n        const reader = new FileReader();\r\n        reader.onload = async () => {\r\n          const tj = require(\"@tmcw/togeojson\"); //gpx to json converter\r\n          const fileContent = file.value.files[0];\r\n          //gpx text -> base64 to be stored in db\r\n          const blob = new Blob([fileContent], { type: \"text/plain\" });\r\n          const text = await blob.text();\r\n          gpx.value = btoa(text);\r\n          //make the text into a gpx file and parse it into a json object\r\n          const gpxFile = new DOMParser().parseFromString(text, \"text/xml\");\r\n          const converted = tj.gpx(gpxFile);\r\n          newRoute.value = converted;\r\n\r\n          const coords = converted.features[0].geometry.coordinates;\r\n          //max locations per request is 512\r\n          let countBy = Math.ceil(coords.length / 512);\r\n          let elevArr = {\r\n            locations: [],\r\n          };\r\n          let count = 0;\r\n          for (let i = 0; i < coords.length; i = i + countBy) {\r\n            elevArr.locations[count] = {\r\n              latitude: coords[i][1],\r\n              longitude: coords[i][0],\r\n            };\r\n            count++;\r\n          }\r\n          console.log(elevArr);\r\n          //get elevation at coord points from backend\r\n          let eresponse = await fetch(\r\n            `https://api.open-elevation.com/api/v1/lookup`,\r\n            {\r\n              method: \"POST\",\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n              },\r\n              body: JSON.stringify(elevArr),\r\n            }\r\n          );\r\n\r\n          eresponse = await eresponse.json();\r\n          console.log(eresponse);\r\n          //elevation gain\r\n          elevArr = eresponse.results;\r\n          let egain = 0;\r\n          let diff = 0;\r\n          for (let i = 1; i < elevArr.length; i++) {\r\n            diff = elevArr[i].elevation - elevArr[i - 1].elevation;\r\n            //only positive elevation changes are added\r\n            if (diff > 0) {\r\n              egain += diff;\r\n            }\r\n          }\r\n          egain = Math.round(egain * 3.28084 * 10) / 10; //meters to feet, rounded to 1 decimal\r\n          elevation.value = egain;\r\n          //route length/distance\r\n          let totalDistance = 0;\r\n          let lat1 = 0;\r\n          let long1 = 0;\r\n          let lat2 = 0;\r\n          let long2 = 0;\r\n          for (let i = 0; i < coords.length - 1; i++) {\r\n            const d2ra = (angle) => (angle * Math.PI) / 180; //degrees to radians\r\n            lat1 = d2ra(coords[i][1]);\r\n            long1 = d2ra(coords[i][0]);\r\n            lat2 = d2ra(coords[i + 1][1]);\r\n            long2 = d2ra(coords[i + 1][0]);\r\n            //use haversine formula to calculate distance between the two points\r\n            const diffLat = lat2 - lat1; //distance between each point\r\n            const diffLong = long2 - long1;\r\n            const a =\r\n              Math.sin(diffLat / 2) ** 2 +\r\n              Math.cos(lat1) * Math.cos(lat2) * Math.sin(diffLong / 2) ** 2;\r\n            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n            const radius = 6371000; //earths radius\r\n            const distance = radius * c;\r\n            totalDistance += distance;\r\n          }\r\n\r\n          routeLength.value =\r\n            Math.round((totalDistance / 1000) * 0.621371 * 10) / 10; //meters to miles, rounded to 1 decimal\r\n          let f = (response) => {\r\n            // request succeeded\r\n            resolve(response);\r\n          };\r\n          f();\r\n        };\r\n        reader.readAsText(file.value.files[0]);\r\n      }\r\n    } catch (e) {\r\n      reject(e);\r\n    }\r\n  });\r\n};\r\n</script>\r\n<style>\r\n.routeForm .routeList {\r\n  width: 50%;\r\n}\r\n.add-route-container {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-direction: column;\r\n}\r\n\r\n.add-route-container .routeForm,\r\n.routeList {\r\n  display: flex;\r\n  flex-direction: column;\r\n  text-align: center;\r\n  background: #eee;\r\n  margin: 0 0 10px 0;\r\n  width: 50%;\r\n  color: #083a8c;\r\n}\r\n\r\n.add-route-container .routeList .routeForm .input label {\r\n  text-align: left;\r\n  margin-right: 10px;\r\n}\r\n\r\n.add-route-container .routeList .routeForm {\r\n  text-align: center;\r\n  background: white;\r\n  width: 50%;\r\n}\r\n\r\n.routeList .route {\r\n  background: #eee;\r\n}\r\n\r\n.input {\r\n  text-align: center;\r\n  padding: 20px;\r\n  width: 50%;\r\n}\r\n\r\nbutton.button {\r\n  width: 100px;\r\n  background: lightgray;\r\n}\r\n\r\n.routeList {\r\n  font-family: roboto;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n@media (max-width: 600px) {\r\n  .input {\r\n    width: 100%;\r\n    padding: 0px;\r\n    margin: 0 0 0 0;\r\n  }\r\n\r\n  .routeForm {\r\n    width: 100%;\r\n    margin: 0 0 0 0;\r\n    padding: 0px;\r\n  }\r\n\r\n  .add-route-container {\r\n    width: 100%;\r\n    margin: 0 0 0 0;\r\n    padding-bottom: 20px;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./EditRoute.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./EditRoute.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./EditRoute.vue?vue&type=style&index=0&id=4b4c24b1&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction $(element, tagName) {\n    return Array.from(element.getElementsByTagName(tagName));\n}\nfunction normalizeId(id) {\n    return id[0] === \"#\" ? id : `#${id}`;\n}\nfunction $ns(element, tagName, ns) {\n    return Array.from(element.getElementsByTagNameNS(ns, tagName));\n}\n/**\n * get the content of a text node, if any\n */\nfunction nodeVal(node) {\n    node?.normalize();\n    return (node && node.textContent) || \"\";\n}\n/**\n * Get one Y child of X, if any, otherwise null\n */\nfunction get1(node, tagName, callback) {\n    const n = node.getElementsByTagName(tagName);\n    const result = n.length ? n[0] : null;\n    if (result && callback)\n        callback(result);\n    return result;\n}\nfunction get(node, tagName, callback) {\n    const properties = {};\n    if (!node)\n        return properties;\n    const n = node.getElementsByTagName(tagName);\n    const result = n.length ? n[0] : null;\n    if (result && callback) {\n        return callback(result, properties);\n    }\n    return properties;\n}\nfunction val1(node, tagName, callback) {\n    const val = nodeVal(get1(node, tagName));\n    if (val && callback)\n        return callback(val) || {};\n    return {};\n}\nfunction $num(node, tagName, callback) {\n    const val = parseFloat(nodeVal(get1(node, tagName)));\n    if (isNaN(val))\n        return undefined;\n    if (val && callback)\n        return callback(val) || {};\n    return {};\n}\nfunction num1(node, tagName, callback) {\n    const val = parseFloat(nodeVal(get1(node, tagName)));\n    if (isNaN(val))\n        return undefined;\n    if (callback)\n        callback(val);\n    return val;\n}\nfunction getMulti(node, propertyNames) {\n    const properties = {};\n    for (const property of propertyNames) {\n        val1(node, property, (val) => {\n            properties[property] = val;\n        });\n    }\n    return properties;\n}\nfunction isElement(node) {\n    return node?.nodeType === 1;\n}\n\nfunction getLineStyle(node) {\n    return get(node, \"line\", (lineStyle) => {\n        const val = Object.assign({}, val1(lineStyle, \"color\", (color) => {\n            return { stroke: `#${color}` };\n        }), $num(lineStyle, \"opacity\", (opacity) => {\n            return { \"stroke-opacity\": opacity };\n        }), $num(lineStyle, \"width\", (width) => {\n            // GPX width is in mm, convert to px with 96 px per inch\n            return { \"stroke-width\": (width * 96) / 25.4 };\n        }));\n        return val;\n    });\n}\n\nfunction getExtensions(node) {\n    let values = [];\n    if (node === null)\n        return values;\n    for (const child of Array.from(node.childNodes)) {\n        if (!isElement(child))\n            continue;\n        const name = abbreviateName(child.nodeName);\n        if (name === \"gpxtpx:TrackPointExtension\") {\n            // loop again for nested garmin extensions (eg. \"gpxtpx:hr\")\n            values = values.concat(getExtensions(child));\n        }\n        else {\n            // push custom extension (eg. \"power\")\n            const val = nodeVal(child);\n            values.push([name, parseNumeric(val)]);\n        }\n    }\n    return values;\n}\nfunction abbreviateName(name) {\n    return [\"heart\", \"gpxtpx:hr\", \"hr\"].includes(name) ? \"heart\" : name;\n}\nfunction parseNumeric(val) {\n    const num = parseFloat(val);\n    return isNaN(num) ? val : num;\n}\n\nfunction coordPair$1(node) {\n    const ll = [\n        parseFloat(node.getAttribute(\"lon\") || \"\"),\n        parseFloat(node.getAttribute(\"lat\") || \"\"),\n    ];\n    if (isNaN(ll[0]) || isNaN(ll[1])) {\n        return null;\n    }\n    num1(node, \"ele\", (val) => {\n        ll.push(val);\n    });\n    const time = get1(node, \"time\");\n    return {\n        coordinates: ll,\n        time: time ? nodeVal(time) : null,\n        extendedValues: getExtensions(get1(node, \"extensions\")),\n    };\n}\n\nfunction extractProperties(node) {\n    const properties = getMulti(node, [\n        \"name\",\n        \"cmt\",\n        \"desc\",\n        \"type\",\n        \"time\",\n        \"keywords\",\n    ]);\n    const extensions = Array.from(node.getElementsByTagNameNS(\"http://www.garmin.com/xmlschemas/GpxExtensions/v3\", \"*\"));\n    for (const child of extensions) {\n        if (child.parentNode?.parentNode === node) {\n            properties[child.tagName.replace(\":\", \"_\")] = nodeVal(child);\n        }\n    }\n    const links = $(node, \"link\");\n    if (links.length) {\n        properties.links = links.map((link) => Object.assign({ href: link.getAttribute(\"href\") }, getMulti(link, [\"text\", \"type\"])));\n    }\n    return properties;\n}\n\n/**\n * Extract points from a trkseg or rte element.\n */\nfunction getPoints$1(node, pointname) {\n    const pts = $(node, pointname);\n    const line = [];\n    const times = [];\n    const extendedValues = {};\n    for (let i = 0; i < pts.length; i++) {\n        const c = coordPair$1(pts[i]);\n        if (!c) {\n            continue;\n        }\n        line.push(c.coordinates);\n        if (c.time)\n            times.push(c.time);\n        for (const [name, val] of c.extendedValues) {\n            const plural = name === \"heart\" ? name : name.replace(\"gpxtpx:\", \"\") + \"s\";\n            if (!extendedValues[plural]) {\n                extendedValues[plural] = Array(pts.length).fill(null);\n            }\n            extendedValues[plural][i] = val;\n        }\n    }\n    if (line.length < 2)\n        return; // Invalid line in GeoJSON\n    return {\n        line: line,\n        times: times,\n        extendedValues: extendedValues,\n    };\n}\n/**\n * Extract a LineString geometry from a rte\n * element.\n */\nfunction getRoute(node) {\n    const line = getPoints$1(node, \"rtept\");\n    if (!line)\n        return;\n    return {\n        type: \"Feature\",\n        properties: Object.assign({ _gpxType: \"rte\" }, extractProperties(node), getLineStyle(get1(node, \"extensions\"))),\n        geometry: {\n            type: \"LineString\",\n            coordinates: line.line,\n        },\n    };\n}\nfunction getTrack(node) {\n    const segments = $(node, \"trkseg\");\n    const track = [];\n    const times = [];\n    const extractedLines = [];\n    for (const segment of segments) {\n        const line = getPoints$1(segment, \"trkpt\");\n        if (line) {\n            extractedLines.push(line);\n            if (line.times && line.times.length)\n                times.push(line.times);\n        }\n    }\n    if (extractedLines.length === 0)\n        return null;\n    const multi = extractedLines.length > 1;\n    const properties = Object.assign({ _gpxType: \"trk\" }, extractProperties(node), getLineStyle(get1(node, \"extensions\")), times.length\n        ? {\n            coordinateProperties: {\n                times: multi ? times : times[0],\n            },\n        }\n        : {});\n    for (const line of extractedLines) {\n        track.push(line.line);\n        if (!properties.coordinateProperties) {\n            properties.coordinateProperties = {};\n        }\n        const props = properties.coordinateProperties;\n        const entries = Object.entries(line.extendedValues);\n        for (let i = 0; i < entries.length; i++) {\n            const [name, val] = entries[i];\n            if (multi) {\n                if (!props[name]) {\n                    props[name] = extractedLines.map((line) => new Array(line.line.length).fill(null));\n                }\n                props[name][i] = val;\n            }\n            else {\n                props[name] = val;\n            }\n        }\n    }\n    return {\n        type: \"Feature\",\n        properties: properties,\n        geometry: multi\n            ? {\n                type: \"MultiLineString\",\n                coordinates: track,\n            }\n            : {\n                type: \"LineString\",\n                coordinates: track[0],\n            },\n    };\n}\n/**\n * Extract a point, if possible, from a given node,\n * which is usually a wpt or trkpt\n */\nfunction getPoint(node) {\n    const properties = Object.assign(extractProperties(node), getMulti(node, [\"sym\"]));\n    const pair = coordPair$1(node);\n    if (!pair)\n        return null;\n    return {\n        type: \"Feature\",\n        properties,\n        geometry: {\n            type: \"Point\",\n            coordinates: pair.coordinates,\n        },\n    };\n}\n/**\n * Convert GPX to GeoJSON incrementally, returning\n * a [Generator](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators)\n * that yields output feature by feature.\n */\nfunction* gpxGen(node) {\n    for (const track of $(node, \"trk\")) {\n        const feature = getTrack(track);\n        if (feature)\n            yield feature;\n    }\n    for (const route of $(node, \"rte\")) {\n        const feature = getRoute(route);\n        if (feature)\n            yield feature;\n    }\n    for (const waypoint of $(node, \"wpt\")) {\n        const point = getPoint(waypoint);\n        if (point)\n            yield point;\n    }\n}\n/**\n *\n * Convert a GPX document to GeoJSON. The first argument, `doc`, must be a GPX\n * document as an XML DOM - not as a string. You can get this using jQuery's default\n * `.ajax` function or using a bare XMLHttpRequest with the `.response` property\n * holding an XML DOM.\n *\n * The output is a JavaScript object of GeoJSON data, same as `.kml` outputs, with the\n * addition of a `_gpxType` property on each `LineString` feature that indicates whether\n * the feature was encoded as a route (`rte`) or track (`trk`) in the GPX document.\n */\nfunction gpx(node) {\n    return {\n        type: \"FeatureCollection\",\n        features: Array.from(gpxGen(node)),\n    };\n}\n\nconst EXTENSIONS_NS = \"http://www.garmin.com/xmlschemas/ActivityExtension/v2\";\nconst TRACKPOINT_ATTRIBUTES = [\n    [\"heartRate\", \"heartRates\"],\n    [\"Cadence\", \"cadences\"],\n    // Extended Trackpoint attributes\n    [\"Speed\", \"speeds\"],\n    [\"Watts\", \"watts\"],\n];\nconst LAP_ATTRIBUTES = [\n    [\"TotalTimeSeconds\", \"totalTimeSeconds\"],\n    [\"DistanceMeters\", \"distanceMeters\"],\n    [\"MaximumSpeed\", \"maxSpeed\"],\n    [\"AverageHeartRateBpm\", \"avgHeartRate\"],\n    [\"MaximumHeartRateBpm\", \"maxHeartRate\"],\n    // Extended Lap attributes\n    [\"AvgSpeed\", \"avgSpeed\"],\n    [\"AvgWatts\", \"avgWatts\"],\n    [\"MaxWatts\", \"maxWatts\"],\n];\nfunction getProperties(node, attributeNames) {\n    const properties = [];\n    for (const [tag, alias] of attributeNames) {\n        let elem = get1(node, tag);\n        if (!elem) {\n            const elements = node.getElementsByTagNameNS(EXTENSIONS_NS, tag);\n            if (elements.length) {\n                elem = elements[0];\n            }\n        }\n        const val = parseFloat(nodeVal(elem));\n        if (!isNaN(val)) {\n            properties.push([alias, val]);\n        }\n    }\n    return properties;\n}\nfunction coordPair(node) {\n    const ll = [num1(node, \"LongitudeDegrees\"), num1(node, \"LatitudeDegrees\")];\n    if (ll[0] === undefined ||\n        isNaN(ll[0]) ||\n        ll[1] === undefined ||\n        isNaN(ll[1])) {\n        return null;\n    }\n    const heartRate = get1(node, \"HeartRateBpm\");\n    const time = nodeVal(get1(node, \"Time\"));\n    get1(node, \"AltitudeMeters\", (alt) => {\n        const a = parseFloat(nodeVal(alt));\n        if (!isNaN(a)) {\n            ll.push(a);\n        }\n    });\n    return {\n        coordinates: ll,\n        time: time || null,\n        heartRate: heartRate ? parseFloat(nodeVal(heartRate)) : null,\n        extensions: getProperties(node, TRACKPOINT_ATTRIBUTES),\n    };\n}\nfunction getPoints(node) {\n    const pts = $(node, \"Trackpoint\");\n    const line = [];\n    const times = [];\n    const heartRates = [];\n    if (pts.length < 2)\n        return null; // Invalid line in GeoJSON\n    const extendedProperties = {};\n    const result = { extendedProperties };\n    for (let i = 0; i < pts.length; i++) {\n        const c = coordPair(pts[i]);\n        if (c === null)\n            continue;\n        line.push(c.coordinates);\n        const { time, heartRate, extensions } = c;\n        if (time)\n            times.push(time);\n        if (heartRate)\n            heartRates.push(heartRate);\n        for (const [alias, value] of extensions) {\n            if (!extendedProperties[alias]) {\n                extendedProperties[alias] = Array(pts.length).fill(null);\n            }\n            extendedProperties[alias][i] = value;\n        }\n    }\n    if (line.length < 2)\n        return null;\n    return Object.assign(result, {\n        line: line,\n        times: times,\n        heartRates: heartRates,\n    });\n}\nfunction getLap(node) {\n    const segments = $(node, \"Track\");\n    const track = [];\n    const times = [];\n    const heartRates = [];\n    const allExtendedProperties = [];\n    let line;\n    const properties = Object.assign(Object.fromEntries(getProperties(node, LAP_ATTRIBUTES)), get(node, \"Name\", (nameElement) => {\n        return { name: nodeVal(nameElement) };\n    }));\n    for (const segment of segments) {\n        line = getPoints(segment);\n        if (line) {\n            track.push(line.line);\n            if (line.times.length)\n                times.push(line.times);\n            if (line.heartRates.length)\n                heartRates.push(line.heartRates);\n            allExtendedProperties.push(line.extendedProperties);\n        }\n    }\n    for (let i = 0; i < allExtendedProperties.length; i++) {\n        const extendedProperties = allExtendedProperties[i];\n        for (const property in extendedProperties) {\n            if (segments.length === 1) {\n                if (line) {\n                    properties[property] = line.extendedProperties[property];\n                }\n            }\n            else {\n                if (!properties[property]) {\n                    properties[property] = track.map((track) => Array(track.length).fill(null));\n                }\n                properties[property][i] = extendedProperties[property];\n            }\n        }\n    }\n    if (track.length === 0)\n        return null;\n    if (times.length || heartRates.length) {\n        properties.coordinateProperties = Object.assign(times.length\n            ? {\n                times: track.length === 1 ? times[0] : times,\n            }\n            : {}, heartRates.length\n            ? {\n                heart: track.length === 1 ? heartRates[0] : heartRates,\n            }\n            : {});\n    }\n    return {\n        type: \"Feature\",\n        properties: properties,\n        geometry: track.length === 1\n            ? {\n                type: \"LineString\",\n                coordinates: track[0],\n            }\n            : {\n                type: \"MultiLineString\",\n                coordinates: track,\n            },\n    };\n}\n/**\n * Incrementally convert a TCX document to GeoJSON. The\n * first argument, `doc`, must be a TCX\n * document as an XML DOM - not as a string.\n */\nfunction* tcxGen(node) {\n    for (const lap of $(node, \"Lap\")) {\n        const feature = getLap(lap);\n        if (feature)\n            yield feature;\n    }\n    for (const course of $(node, \"Courses\")) {\n        const feature = getLap(course);\n        if (feature)\n            yield feature;\n    }\n}\n/**\n * Convert a TCX document to GeoJSON. The first argument, `doc`, must be a TCX\n * document as an XML DOM - not as a string.\n */\nfunction tcx(node) {\n    return {\n        type: \"FeatureCollection\",\n        features: Array.from(tcxGen(node)),\n    };\n}\n\nfunction fixColor(v, prefix) {\n    const properties = {};\n    const colorProp = prefix == \"stroke\" || prefix === \"fill\" ? prefix : prefix + \"-color\";\n    if (v[0] === \"#\") {\n        v = v.substring(1);\n    }\n    if (v.length === 6 || v.length === 3) {\n        properties[colorProp] = \"#\" + v;\n    }\n    else if (v.length === 8) {\n        properties[prefix + \"-opacity\"] = parseInt(v.substring(0, 2), 16) / 255;\n        properties[colorProp] =\n            \"#\" + v.substring(6, 8) + v.substring(4, 6) + v.substring(2, 4);\n    }\n    return properties;\n}\n\nfunction numericProperty(node, source, target) {\n    const properties = {};\n    num1(node, source, (val) => {\n        properties[target] = val;\n    });\n    return properties;\n}\nfunction getColor(node, output) {\n    return get(node, \"color\", (elem) => fixColor(nodeVal(elem), output));\n}\nfunction extractIconHref(node) {\n    return get(node, \"Icon\", (icon, properties) => {\n        val1(icon, \"href\", (href) => {\n            properties.icon = href;\n        });\n        return properties;\n    });\n}\nfunction extractIcon(node) {\n    return get(node, \"IconStyle\", (iconStyle) => {\n        return Object.assign(getColor(iconStyle, \"icon\"), numericProperty(iconStyle, \"scale\", \"icon-scale\"), numericProperty(iconStyle, \"heading\", \"icon-heading\"), get(iconStyle, \"hotSpot\", (hotspot) => {\n            const left = parseFloat(hotspot.getAttribute(\"x\") || \"\");\n            const top = parseFloat(hotspot.getAttribute(\"y\") || \"\");\n            const xunits = hotspot.getAttribute(\"xunits\") || \"\";\n            const yunits = hotspot.getAttribute(\"yunits\") || \"\";\n            if (!isNaN(left) && !isNaN(top))\n                return {\n                    \"icon-offset\": [left, top],\n                    \"icon-offset-units\": [xunits, yunits],\n                };\n            return {};\n        }), extractIconHref(iconStyle));\n    });\n}\nfunction extractLabel(node) {\n    return get(node, \"LabelStyle\", (labelStyle) => {\n        return Object.assign(getColor(labelStyle, \"label\"), numericProperty(labelStyle, \"scale\", \"label-scale\"));\n    });\n}\nfunction extractLine(node) {\n    return get(node, \"LineStyle\", (lineStyle) => {\n        return Object.assign(getColor(lineStyle, \"stroke\"), numericProperty(lineStyle, \"width\", \"stroke-width\"));\n    });\n}\nfunction extractPoly(node) {\n    return get(node, \"PolyStyle\", (polyStyle, properties) => {\n        return Object.assign(properties, get(polyStyle, \"color\", (elem) => fixColor(nodeVal(elem), \"fill\")), val1(polyStyle, \"fill\", (fill) => {\n            if (fill === \"0\")\n                return { \"fill-opacity\": 0 };\n        }), val1(polyStyle, \"outline\", (outline) => {\n            if (outline === \"0\")\n                return { \"stroke-opacity\": 0 };\n        }));\n    });\n}\nfunction extractStyle(node) {\n    return Object.assign({}, extractPoly(node), extractLine(node), extractLabel(node), extractIcon(node));\n}\n\nconst toNumber = (x) => Number(x);\nconst typeConverters = {\n    string: (x) => x,\n    int: toNumber,\n    uint: toNumber,\n    short: toNumber,\n    ushort: toNumber,\n    float: toNumber,\n    double: toNumber,\n    bool: (x) => Boolean(x),\n};\nfunction extractExtendedData(node, schema) {\n    return get(node, \"ExtendedData\", (extendedData, properties) => {\n        for (const data of $(extendedData, \"Data\")) {\n            properties[data.getAttribute(\"name\") || \"\"] = nodeVal(get1(data, \"value\"));\n        }\n        for (const simpleData of $(extendedData, \"SimpleData\")) {\n            const name = simpleData.getAttribute(\"name\") || \"\";\n            const typeConverter = schema[name] || typeConverters.string;\n            properties[name] = typeConverter(nodeVal(simpleData));\n        }\n        return properties;\n    });\n}\nfunction getMaybeHTMLDescription(node) {\n    const descriptionNode = get1(node, \"description\");\n    for (const c of Array.from(descriptionNode?.childNodes || [])) {\n        if (c.nodeType === 4) {\n            return {\n                description: {\n                    \"@type\": \"html\",\n                    value: nodeVal(c),\n                },\n            };\n        }\n    }\n    return {};\n}\nfunction extractTimeSpan(node) {\n    return get(node, \"TimeSpan\", (timeSpan) => {\n        return {\n            timespan: {\n                begin: nodeVal(get1(timeSpan, \"begin\")),\n                end: nodeVal(get1(timeSpan, \"end\")),\n            },\n        };\n    });\n}\nfunction extractTimeStamp(node) {\n    return get(node, \"TimeStamp\", (timeStamp) => {\n        return { timestamp: nodeVal(get1(timeStamp, \"when\")) };\n    });\n}\nfunction extractCascadedStyle(node, styleMap) {\n    return val1(node, \"styleUrl\", (styleUrl) => {\n        styleUrl = normalizeId(styleUrl);\n        if (styleMap[styleUrl]) {\n            return Object.assign({ styleUrl }, styleMap[styleUrl]);\n        }\n        // For backward-compatibility. Should we still include\n        // styleUrl even if it's not resolved?\n        return { styleUrl };\n    });\n}\n\nconst removeSpace = /\\s*/g;\nconst trimSpace = /^\\s*|\\s*$/g;\nconst splitSpace = /\\s+/;\n/**\n * Get one coordinate from a coordinate array, if any\n */\nfunction coord1(value) {\n    return value\n        .replace(removeSpace, \"\")\n        .split(\",\")\n        .map(parseFloat)\n        .filter((num) => !isNaN(num))\n        .slice(0, 3);\n}\n/**\n * Get all coordinates from a coordinate array as [[],[]]\n */\nfunction coord(value) {\n    return value\n        .replace(trimSpace, \"\")\n        .split(splitSpace)\n        .map(coord1)\n        .filter((coord) => {\n        return coord.length >= 2;\n    });\n}\nfunction gxCoords(node) {\n    let elems = $(node, \"coord\");\n    if (elems.length === 0) {\n        elems = $ns(node, \"coord\", \"*\");\n    }\n    const coordinates = elems.map((elem) => {\n        return nodeVal(elem).split(\" \").map(parseFloat);\n    });\n    if (coordinates.length === 0) {\n        return null;\n    }\n    return {\n        geometry: coordinates.length > 2\n            ? {\n                type: \"LineString\",\n                coordinates,\n            }\n            : {\n                type: \"Point\",\n                coordinates: coordinates[0],\n            },\n        times: $(node, \"when\").map((elem) => nodeVal(elem)),\n    };\n}\nfunction fixRing(ring) {\n    if (ring.length === 0)\n        return ring;\n    const first = ring[0];\n    const last = ring[ring.length - 1];\n    let equal = true;\n    for (let i = 0; i < Math.max(first.length, last.length); i++) {\n        if (first[i] !== last[i]) {\n            equal = false;\n            break;\n        }\n    }\n    if (!equal) {\n        return ring.concat([ring[0]]);\n    }\n    return ring;\n}\nfunction getCoordinates(node) {\n    return nodeVal(get1(node, \"coordinates\"));\n}\nfunction getGeometry(node) {\n    let geometries = [];\n    let coordTimes = [];\n    for (let i = 0; i < node.childNodes.length; i++) {\n        const child = node.childNodes.item(i);\n        if (isElement(child)) {\n            switch (child.tagName) {\n                case \"MultiGeometry\":\n                case \"MultiTrack\":\n                case \"gx:MultiTrack\": {\n                    const childGeometries = getGeometry(child);\n                    geometries = geometries.concat(childGeometries.geometries);\n                    coordTimes = coordTimes.concat(childGeometries.coordTimes);\n                    break;\n                }\n                case \"Point\": {\n                    const coordinates = coord1(getCoordinates(child));\n                    if (coordinates.length >= 2) {\n                        geometries.push({\n                            type: \"Point\",\n                            coordinates,\n                        });\n                    }\n                    break;\n                }\n                case \"LinearRing\":\n                case \"LineString\": {\n                    const coordinates = coord(getCoordinates(child));\n                    if (coordinates.length >= 2) {\n                        geometries.push({\n                            type: \"LineString\",\n                            coordinates,\n                        });\n                    }\n                    break;\n                }\n                case \"Polygon\": {\n                    const coords = [];\n                    for (const linearRing of $(child, \"LinearRing\")) {\n                        const ring = fixRing(coord(getCoordinates(linearRing)));\n                        if (ring.length >= 4) {\n                            coords.push(ring);\n                        }\n                    }\n                    if (coords.length) {\n                        geometries.push({\n                            type: \"Polygon\",\n                            coordinates: coords,\n                        });\n                    }\n                    break;\n                }\n                case \"Track\":\n                case \"gx:Track\": {\n                    const gx = gxCoords(child);\n                    if (!gx)\n                        break;\n                    const { times, geometry } = gx;\n                    geometries.push(geometry);\n                    if (times.length)\n                        coordTimes.push(times);\n                    break;\n                }\n            }\n        }\n    }\n    return {\n        geometries,\n        coordTimes,\n    };\n}\n\nfunction geometryListToGeometry(geometries) {\n    return geometries.length === 0\n        ? null\n        : geometries.length === 1\n            ? geometries[0]\n            : {\n                type: \"GeometryCollection\",\n                geometries,\n            };\n}\nfunction getPlacemark(node, styleMap, schema, options) {\n    const { coordTimes, geometries } = getGeometry(node);\n    const geometry = geometryListToGeometry(geometries);\n    if (!geometry && options.skipNullGeometry) {\n        return null;\n    }\n    const feature = {\n        type: \"Feature\",\n        geometry,\n        properties: Object.assign(getMulti(node, [\n            \"name\",\n            \"address\",\n            \"visibility\",\n            \"open\",\n            \"phoneNumber\",\n            \"description\",\n        ]), getMaybeHTMLDescription(node), extractCascadedStyle(node, styleMap), extractStyle(node), extractExtendedData(node, schema), extractTimeSpan(node), extractTimeStamp(node), coordTimes.length\n            ? {\n                coordinateProperties: {\n                    times: coordTimes.length === 1 ? coordTimes[0] : coordTimes,\n                },\n            }\n            : {}),\n    };\n    if (feature.properties?.visibility !== undefined) {\n        feature.properties.visibility = feature.properties.visibility !== \"0\";\n    }\n    const id = node.getAttribute(\"id\");\n    if (id !== null && id !== \"\")\n        feature.id = id;\n    return feature;\n}\n\nfunction getGroundOverlayBox(node) {\n    const latLonQuad = get1(node, \"gx:LatLonQuad\");\n    if (latLonQuad) {\n        const ring = fixRing(coord(getCoordinates(node)));\n        return {\n            geometry: {\n                type: \"Polygon\",\n                coordinates: [ring],\n            },\n        };\n    }\n    return getLatLonBox(node);\n}\nconst DEGREES_TO_RADIANS = Math.PI / 180;\nfunction rotateBox(bbox, coordinates, rotation) {\n    const center = [(bbox[0] + bbox[2]) / 2, (bbox[1] + bbox[3]) / 2];\n    return [\n        coordinates[0].map((coordinate) => {\n            const dy = coordinate[1] - center[1];\n            const dx = coordinate[0] - center[0];\n            const distance = Math.sqrt(Math.pow(dy, 2) + Math.pow(dx, 2));\n            const angle = Math.atan2(dy, dx) + rotation * DEGREES_TO_RADIANS;\n            return [\n                center[0] + Math.cos(angle) * distance,\n                center[1] + Math.sin(angle) * distance,\n            ];\n        }),\n    ];\n}\nfunction getLatLonBox(node) {\n    const latLonBox = get1(node, \"LatLonBox\");\n    if (latLonBox) {\n        const north = num1(latLonBox, \"north\");\n        const west = num1(latLonBox, \"west\");\n        const east = num1(latLonBox, \"east\");\n        const south = num1(latLonBox, \"south\");\n        const rotation = num1(latLonBox, \"rotation\");\n        if (typeof north === \"number\" &&\n            typeof south === \"number\" &&\n            typeof west === \"number\" &&\n            typeof east === \"number\") {\n            const bbox = [west, south, east, north];\n            let coordinates = [\n                [\n                    [west, north],\n                    [east, north],\n                    [east, south],\n                    [west, south],\n                    [west, north], // top left (again)\n                ],\n            ];\n            if (typeof rotation === \"number\") {\n                coordinates = rotateBox(bbox, coordinates, rotation);\n            }\n            return {\n                bbox,\n                geometry: {\n                    type: \"Polygon\",\n                    coordinates,\n                },\n            };\n        }\n    }\n    return null;\n}\nfunction getGroundOverlay(node, styleMap, schema, options) {\n    const box = getGroundOverlayBox(node);\n    const geometry = box?.geometry || null;\n    if (!geometry && options.skipNullGeometry) {\n        return null;\n    }\n    const feature = {\n        type: \"Feature\",\n        geometry,\n        properties: Object.assign(\n        /**\n         * Related to\n         * https://gist.github.com/tmcw/037a1cb6660d74a392e9da7446540f46\n         */\n        { \"@geometry-type\": \"groundoverlay\" }, getMulti(node, [\n            \"name\",\n            \"address\",\n            \"visibility\",\n            \"open\",\n            \"phoneNumber\",\n            \"description\",\n        ]), getMaybeHTMLDescription(node), extractCascadedStyle(node, styleMap), extractStyle(node), extractIconHref(node), extractExtendedData(node, schema), extractTimeSpan(node), extractTimeStamp(node)),\n    };\n    if (box?.bbox) {\n        feature.bbox = box.bbox;\n    }\n    if (feature.properties?.visibility !== undefined) {\n        feature.properties.visibility = feature.properties.visibility !== \"0\";\n    }\n    const id = node.getAttribute(\"id\");\n    if (id !== null && id !== \"\")\n        feature.id = id;\n    return feature;\n}\n\nfunction getStyleId(style) {\n    let id = style.getAttribute(\"id\");\n    const parentNode = style.parentNode;\n    if (!id &&\n        isElement(parentNode) &&\n        parentNode.localName === \"CascadingStyle\") {\n        id = parentNode.getAttribute(\"kml:id\") || parentNode.getAttribute(\"id\");\n    }\n    return normalizeId(id || \"\");\n}\nfunction buildStyleMap(node) {\n    const styleMap = {};\n    for (const style of $(node, \"Style\")) {\n        styleMap[getStyleId(style)] = extractStyle(style);\n    }\n    for (const map of $(node, \"StyleMap\")) {\n        const id = normalizeId(map.getAttribute(\"id\") || \"\");\n        val1(map, \"styleUrl\", (styleUrl) => {\n            styleUrl = normalizeId(styleUrl);\n            if (styleMap[styleUrl]) {\n                styleMap[id] = styleMap[styleUrl];\n            }\n        });\n    }\n    return styleMap;\n}\nfunction buildSchema(node) {\n    const schema = {};\n    for (const field of $(node, \"SimpleField\")) {\n        schema[field.getAttribute(\"name\") || \"\"] =\n            typeConverters[field.getAttribute(\"type\") || \"\"] ||\n                typeConverters[\"string\"];\n    }\n    return schema;\n}\nconst FOLDER_PROPS = [\n    \"name\",\n    \"visibility\",\n    \"open\",\n    \"address\",\n    \"description\",\n    \"phoneNumber\",\n    \"visibility\",\n];\nfunction getFolder(node) {\n    const meta = {};\n    for (const child of Array.from(node.childNodes)) {\n        if (isElement(child) && FOLDER_PROPS.includes(child.tagName)) {\n            meta[child.tagName] = nodeVal(child);\n        }\n    }\n    return {\n        type: \"folder\",\n        meta,\n        children: [],\n    };\n}\n/**\n * Yield a nested tree with KML folder structure\n *\n * This generates a tree with the given structure:\n *\n * ```js\n * {\n *   \"type\": \"root\",\n *   \"children\": [\n *     {\n *       \"type\": \"folder\",\n *       \"meta\": {\n *         \"name\": \"Test\"\n *       },\n *       \"children\": [\n *          // ...features and folders\n *       ]\n *     }\n *     // ...features\n *   ]\n * }\n * ```\n *\n * ### GroundOverlay\n *\n * GroundOverlay elements are converted into\n * `Feature` objects with `Polygon` geometries,\n * a property like:\n *\n * ```json\n * {\n *   \"@geometry-type\": \"groundoverlay\"\n * }\n * ```\n *\n * And the ground overlay's image URL in the `href`\n * property. Ground overlays will need to be displayed\n * with a separate method to other features, depending\n * on which map framework you're using.\n */\nfunction kmlWithFolders(node, options = {\n    skipNullGeometry: false,\n}) {\n    const styleMap = buildStyleMap(node);\n    const schema = buildSchema(node);\n    const tree = { type: \"root\", children: [] };\n    function traverse(node, pointer, options) {\n        if (isElement(node)) {\n            switch (node.tagName) {\n                case \"GroundOverlay\": {\n                    const placemark = getGroundOverlay(node, styleMap, schema, options);\n                    if (placemark) {\n                        pointer.children.push(placemark);\n                    }\n                    break;\n                }\n                case \"Placemark\": {\n                    const placemark = getPlacemark(node, styleMap, schema, options);\n                    if (placemark) {\n                        pointer.children.push(placemark);\n                    }\n                    break;\n                }\n                case \"Folder\": {\n                    const folder = getFolder(node);\n                    pointer.children.push(folder);\n                    pointer = folder;\n                    break;\n                }\n            }\n        }\n        if (node.childNodes) {\n            for (let i = 0; i < node.childNodes.length; i++) {\n                traverse(node.childNodes[i], pointer, options);\n            }\n        }\n    }\n    traverse(node, tree, options);\n    return tree;\n}\n/**\n * Convert KML to GeoJSON incrementally, returning\n * a [Generator](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators)\n * that yields output feature by feature.\n */\nfunction* kmlGen(node, options = {\n    skipNullGeometry: false,\n}) {\n    const styleMap = buildStyleMap(node);\n    const schema = buildSchema(node);\n    for (const placemark of $(node, \"Placemark\")) {\n        const feature = getPlacemark(placemark, styleMap, schema, options);\n        if (feature)\n            yield feature;\n    }\n    for (const groundOverlay of $(node, \"GroundOverlay\")) {\n        const feature = getGroundOverlay(groundOverlay, styleMap, schema, options);\n        if (feature)\n            yield feature;\n    }\n}\n/**\n * Convert a KML document to GeoJSON. The first argument, `doc`, must be a KML\n * document as an XML DOM - not as a string. You can get this using jQuery's default\n * `.ajax` function or using a bare XMLHttpRequest with the `.response` property\n * holding an XML DOM.\n *\n * The output is a JavaScript object of GeoJSON data. You can convert it to a string\n * with [JSON.stringify](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)\n * or use it directly in libraries.\n */\nfunction kml(node, options = {\n    skipNullGeometry: false,\n}) {\n    return {\n        type: \"FeatureCollection\",\n        features: Array.from(kmlGen(node, options)),\n    };\n}\n\nexports.gpx = gpx;\nexports.gpxGen = gpxGen;\nexports.kml = kml;\nexports.kmlGen = kmlGen;\nexports.kmlWithFolders = kmlWithFolders;\nexports.tcx = tcx;\nexports.tcxGen = tcxGen;\n//# sourceMappingURL=togeojson.cjs.map\n","import { resolveDirective as _resolveDirective, createVNode as _createVNode, mergeProps as _mergeProps, Fragment as _Fragment } from \"vue\";\n// Styles\nimport \"./VFileInput.css\";\n\n// Components\nimport { VChip } from \"../VChip/index.mjs\";\nimport { VCounter } from \"../VCounter/index.mjs\";\nimport { VField } from \"../VField/index.mjs\";\nimport { filterFieldProps, makeVFieldProps } from \"../VField/VField.mjs\";\nimport { makeVInputProps, VInput } from \"../VInput/VInput.mjs\"; // Composables\nimport { useFocus } from \"../../composables/focus.mjs\";\nimport { forwardRefs } from \"../../composables/forwardRefs.mjs\";\nimport { useLocale } from \"../../composables/locale.mjs\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.mjs\"; // Utilities\nimport { computed, nextTick, ref, watch } from 'vue';\nimport { callEvent, filterInputAttrs, genericComponent, humanReadableFileSize, propsFactory, useRender, wrapInArray } from \"../../util/index.mjs\"; // Types\nexport const makeVFileInputProps = propsFactory({\n  chips: Boolean,\n  counter: Boolean,\n  counterSizeString: {\n    type: String,\n    default: '$vuetify.fileInput.counterSize'\n  },\n  counterString: {\n    type: String,\n    default: '$vuetify.fileInput.counter'\n  },\n  multiple: Boolean,\n  showSize: {\n    type: [Boolean, Number],\n    default: false,\n    validator: v => {\n      return typeof v === 'boolean' || [1000, 1024].includes(v);\n    }\n  },\n  ...makeVInputProps({\n    prependIcon: '$file'\n  }),\n  modelValue: {\n    type: Array,\n    default: () => [],\n    validator: val => {\n      return wrapInArray(val).every(v => v != null && typeof v === 'object');\n    }\n  },\n  ...makeVFieldProps({\n    clearable: true\n  })\n}, 'VFileInput');\nexport const VFileInput = genericComponent()({\n  name: 'VFileInput',\n  inheritAttrs: false,\n  props: makeVFileInputProps(),\n  emits: {\n    'click:control': e => true,\n    'mousedown:control': e => true,\n    'update:focused': focused => true,\n    'update:modelValue': files => true\n  },\n  setup(props, _ref) {\n    let {\n      attrs,\n      emit,\n      slots\n    } = _ref;\n    const {\n      t\n    } = useLocale();\n    const model = useProxiedModel(props, 'modelValue');\n    const {\n      isFocused,\n      focus,\n      blur\n    } = useFocus(props);\n    const base = computed(() => typeof props.showSize !== 'boolean' ? props.showSize : undefined);\n    const totalBytes = computed(() => (model.value ?? []).reduce((bytes, _ref2) => {\n      let {\n        size = 0\n      } = _ref2;\n      return bytes + size;\n    }, 0));\n    const totalBytesReadable = computed(() => humanReadableFileSize(totalBytes.value, base.value));\n    const fileNames = computed(() => (model.value ?? []).map(file => {\n      const {\n        name = '',\n        size = 0\n      } = file;\n      return !props.showSize ? name : `${name} (${humanReadableFileSize(size, base.value)})`;\n    }));\n    const counterValue = computed(() => {\n      const fileCount = model.value?.length ?? 0;\n      if (props.showSize) return t(props.counterSizeString, fileCount, totalBytesReadable.value);else return t(props.counterString, fileCount);\n    });\n    const vInputRef = ref();\n    const vFieldRef = ref();\n    const inputRef = ref();\n    const isActive = computed(() => isFocused.value || props.active);\n    const isPlainOrUnderlined = computed(() => ['plain', 'underlined'].includes(props.variant));\n    function onFocus() {\n      if (inputRef.value !== document.activeElement) {\n        inputRef.value?.focus();\n      }\n      if (!isFocused.value) focus();\n    }\n    function onClickPrepend(e) {\n      onControlClick(e);\n    }\n    function onControlMousedown(e) {\n      emit('mousedown:control', e);\n    }\n    function onControlClick(e) {\n      inputRef.value?.click();\n      emit('click:control', e);\n    }\n    function onClear(e) {\n      e.stopPropagation();\n      onFocus();\n      nextTick(() => {\n        model.value = [];\n        callEvent(props['onClick:clear'], e);\n      });\n    }\n    watch(model, newValue => {\n      const hasModelReset = !Array.isArray(newValue) || !newValue.length;\n      if (hasModelReset && inputRef.value) {\n        inputRef.value.value = '';\n      }\n    });\n    useRender(() => {\n      const hasCounter = !!(slots.counter || props.counter);\n      const hasDetails = !!(hasCounter || slots.details);\n      const [rootAttrs, inputAttrs] = filterInputAttrs(attrs);\n      const [{\n        modelValue: _,\n        ...inputProps\n      }] = VInput.filterProps(props);\n      const [fieldProps] = filterFieldProps(props);\n      return _createVNode(VInput, _mergeProps({\n        \"ref\": vInputRef,\n        \"modelValue\": model.value,\n        \"onUpdate:modelValue\": $event => model.value = $event,\n        \"class\": ['v-file-input', {\n          'v-text-field--plain-underlined': isPlainOrUnderlined.value\n        }, props.class],\n        \"style\": props.style,\n        \"onClick:prepend\": onClickPrepend\n      }, rootAttrs, inputProps, {\n        \"centerAffix\": !isPlainOrUnderlined.value,\n        \"focused\": isFocused.value\n      }), {\n        ...slots,\n        default: _ref3 => {\n          let {\n            id,\n            isDisabled,\n            isDirty,\n            isReadonly,\n            isValid\n          } = _ref3;\n          return _createVNode(VField, _mergeProps({\n            \"ref\": vFieldRef,\n            \"prepend-icon\": props.prependIcon,\n            \"onMousedown\": onControlMousedown,\n            \"onClick\": onControlClick,\n            \"onClick:clear\": onClear,\n            \"onClick:prependInner\": props['onClick:prependInner'],\n            \"onClick:appendInner\": props['onClick:appendInner']\n          }, fieldProps, {\n            \"id\": id.value,\n            \"active\": isActive.value || isDirty.value,\n            \"dirty\": isDirty.value,\n            \"disabled\": isDisabled.value,\n            \"focused\": isFocused.value,\n            \"error\": isValid.value === false\n          }), {\n            ...slots,\n            default: _ref4 => {\n              let {\n                props: {\n                  class: fieldClass,\n                  ...slotProps\n                }\n              } = _ref4;\n              return _createVNode(_Fragment, null, [_createVNode(\"input\", _mergeProps({\n                \"ref\": inputRef,\n                \"type\": \"file\",\n                \"readonly\": isReadonly.value,\n                \"disabled\": isDisabled.value,\n                \"multiple\": props.multiple,\n                \"name\": props.name,\n                \"onClick\": e => {\n                  e.stopPropagation();\n                  if (isReadonly.value) e.preventDefault();\n                  onFocus();\n                },\n                \"onChange\": e => {\n                  if (!e.target) return;\n                  const target = e.target;\n                  model.value = [...(target.files ?? [])];\n                },\n                \"onFocus\": onFocus,\n                \"onBlur\": blur\n              }, slotProps, inputAttrs), null), _createVNode(\"div\", {\n                \"class\": fieldClass\n              }, [!!model.value?.length && (slots.selection ? slots.selection({\n                fileNames: fileNames.value,\n                totalBytes: totalBytes.value,\n                totalBytesReadable: totalBytesReadable.value\n              }) : props.chips ? fileNames.value.map(text => _createVNode(VChip, {\n                \"key\": text,\n                \"size\": \"small\",\n                \"color\": props.color\n              }, {\n                default: () => [text]\n              })) : fileNames.value.join(', '))])]);\n            }\n          });\n        },\n        details: hasDetails ? slotProps => _createVNode(_Fragment, null, [slots.details?.(slotProps), hasCounter && _createVNode(_Fragment, null, [_createVNode(\"span\", null, null), _createVNode(VCounter, {\n          \"active\": !!model.value?.length,\n          \"value\": counterValue.value\n        }, slots.counter)])]) : undefined\n      });\n    });\n    return forwardRefs({}, vInputRef, vFieldRef, inputRef);\n  }\n});\n//# sourceMappingURL=VFileInput.mjs.map","import { createVNode as _createVNode } from \"vue\";\n// Composables\nimport { makeComponentProps } from \"../../composables/component.mjs\";\nimport { createForm, makeFormProps } from \"../../composables/form.mjs\";\nimport { forwardRefs } from \"../../composables/forwardRefs.mjs\"; // Utilities\nimport { ref } from 'vue';\nimport { genericComponent, propsFactory, useRender } from \"../../util/index.mjs\"; // Types\nexport const makeVFormProps = propsFactory({\n  ...makeComponentProps(),\n  ...makeFormProps()\n}, 'VForm');\nexport const VForm = genericComponent()({\n  name: 'VForm',\n  props: makeVFormProps(),\n  emits: {\n    'update:modelValue': val => true,\n    submit: e => true\n  },\n  setup(props, _ref) {\n    let {\n      slots,\n      emit\n    } = _ref;\n    const form = createForm(props);\n    const formRef = ref();\n    function onReset(e) {\n      e.preventDefault();\n      form.reset();\n    }\n    function onSubmit(_e) {\n      const e = _e;\n      const ready = form.validate();\n      e.then = ready.then.bind(ready);\n      e.catch = ready.catch.bind(ready);\n      e.finally = ready.finally.bind(ready);\n      emit('submit', e);\n      if (!e.defaultPrevented) {\n        ready.then(_ref2 => {\n          let {\n            valid\n          } = _ref2;\n          if (valid) {\n            formRef.value?.submit();\n          }\n        });\n      }\n      e.preventDefault();\n    }\n    useRender(() => _createVNode(\"form\", {\n      \"ref\": formRef,\n      \"class\": ['v-form', props.class],\n      \"style\": props.style,\n      \"novalidate\": true,\n      \"onReset\": onReset,\n      \"onSubmit\": onSubmit\n    }, [slots.default?.(form)]));\n    return forwardRefs(form, formRef);\n  }\n});\n//# sourceMappingURL=VForm.mjs.map"],"names":["makeVDialogProps","propsFactory","fullscreen","Boolean","retainFocus","type","default","scrollable","origin","scrollStrategy","transition","component","zIndex","VDialog","name","props","emits","value","setup","_ref","slots","isActive","scopeId","overlay","onFocusin","e","before","relatedTarget","after","target","contentEl","globalTop","document","includes","contains","focusable","length","firstElement","lastElement","focus","val","addEventListener","removeEventListener","immediate","async","preventScroll","activatorEl","activatorProps","String","useRender","overlayProps","VOverlay","filterProps","class","style","$event","activator","_len","arguments","args","Array","_key","VDefaultsProvider","forwardRefs","makeVTextareaProps","autoGrow","autofocus","counter","Number","counterValue","Function","prefix","placeholder","persistentPlaceholder","persistentCounter","noResize","rows","validator","v","isNaN","parseFloat","maxRows","suffix","modelModifiers","Object","VTextarea","directives","Intersect","inheritAttrs","focused","attrs","emit","model","isFocused","blur","toString","max","maxlength","onIntersect","isIntersecting","entries","vInputRef","vFieldRef","controlHeight","textareaRef","active","onFocus","activeElement","onControlClick","onControlMousedown","onClear","stopPropagation","onInput","el","trim","caretPosition","selectionStart","selectionEnd","sizerRef","isPlainOrUnderlined","variant","calculateInputHeight","getComputedStyle","fieldStyle","$el","padding","getPropertyValue","height","scrollHeight","lineHeight","minHeight","Math","maxHeight","Infinity","newHeight","floor","observer","density","ResizeObserver","observe","disconnect","hasCounter","hasDetails","details","rootAttrs","inputAttrs","modelValue","_","inputProps","VInput","fieldProps","_ref2","isDisabled","isDirty","isReadonly","isValid","VField","dirty","_ref3","fieldClass","slotProps","handler","once","id","VCounter","undefined","search","headers","align","key","title","sortable","routeStore","getRoutes","routes","del","deleteRoute","routeName","routeLength","terrain","difficulty","routeDesc","file","gpx","newRoute","elevation","editForm","submitEdit","event","console","log","submit","check","valid","handleFile","routeToAdd","route","desc","addRoute","error","Promise","resolve","reject","reader","FileReader","onload","tj","fileContent","files","blob","Blob","text","btoa","gpxFile","DOMParser","parseFromString","converted","coords","features","geometry","coordinates","countBy","ceil","elevArr","locations","count","i","latitude","longitude","eresponse","fetch","method","body","JSON","stringify","json","results","egain","diff","round","totalDistance","lat1","long1","lat2","long2","d2ra","angle","PI","diffLat","diffLong","a","sin","cos","c","atan2","sqrt","radius","distance","f","response","readAsText","__exports__","form","poi","inputRules","deleteBtn","$","element","tagName","from","getElementsByTagName","normalizeId","$ns","ns","getElementsByTagNameNS","nodeVal","node","normalize","textContent","get1","callback","n","result","get","properties","val1","$num","num1","getMulti","propertyNames","property","isElement","nodeType","getLineStyle","lineStyle","assign","color","stroke","opacity","width","getExtensions","values","child","childNodes","abbreviateName","nodeName","concat","push","parseNumeric","num","coordPair$1","ll","getAttribute","time","extendedValues","extractProperties","extensions","parentNode","replace","links","map","link","href","getPoints$1","pointname","pts","line","times","plural","fill","getRoute","_gpxType","getTrack","segments","track","extractedLines","segment","multi","coordinateProperties","getPoint","pair","gpxGen","feature","waypoint","point","defineProperty","exports","EXTENSIONS_NS","TRACKPOINT_ATTRIBUTES","LAP_ATTRIBUTES","getProperties","attributeNames","tag","alias","elem","elements","coordPair","heartRate","alt","getPoints","heartRates","extendedProperties","getLap","allExtendedProperties","fromEntries","nameElement","heart","tcxGen","lap","course","tcx","fixColor","colorProp","substring","parseInt","numericProperty","source","getColor","output","extractIconHref","icon","extractIcon","iconStyle","hotspot","left","top","xunits","yunits","extractLabel","labelStyle","extractLine","extractPoly","polyStyle","outline","extractStyle","toNumber","x","typeConverters","string","int","uint","short","ushort","float","double","bool","extractExtendedData","schema","extendedData","data","simpleData","typeConverter","getMaybeHTMLDescription","descriptionNode","description","extractTimeSpan","timeSpan","timespan","begin","end","extractTimeStamp","timeStamp","timestamp","extractCascadedStyle","styleMap","styleUrl","removeSpace","trimSpace","splitSpace","coord1","split","filter","slice","coord","gxCoords","elems","fixRing","ring","first","last","equal","getCoordinates","getGeometry","geometries","coordTimes","item","childGeometries","linearRing","gx","geometryListToGeometry","getPlacemark","options","skipNullGeometry","visibility","getGroundOverlayBox","latLonQuad","getLatLonBox","DEGREES_TO_RADIANS","rotateBox","bbox","rotation","center","coordinate","dy","dx","pow","latLonBox","north","west","east","south","getGroundOverlay","box","getStyleId","localName","buildStyleMap","buildSchema","field","FOLDER_PROPS","getFolder","meta","children","kmlWithFolders","tree","traverse","pointer","placemark","folder","kmlGen","groundOverlay","kml","makeVFileInputProps","chips","counterSizeString","counterString","multiple","showSize","prependIcon","every","clearable","VFileInput","t","base","totalBytes","reduce","bytes","size","totalBytesReadable","fileNames","fileCount","inputRef","onClickPrepend","click","newValue","hasModelReset","isArray","_ref4","preventDefault","selection","VChip","join","makeVFormProps","VForm","formRef","onReset","reset","onSubmit","_e","ready","validate","then","bind","catch","finally","defaultPrevented"],"sourceRoot":""}